{"ast":null,"code":"import _regeneratorRuntime from \"/Users/leonardogutierrezjuarez/Documents/examen/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/leonardogutierrezjuarez/Documents/examen/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/leonardogutierrezjuarez/Documents/examen/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/leonardogutierrezjuarez/Documents/examen/src/moduloPromociones/index.js\";\n\nimport React, { useState, useEffect } from \"react\";\nimport Contenedor, { Alert } from '../componentsPrincipales/Alert.jsx';\nimport { Toolbar } from 'primereact/toolbar';\nimport { Button } from 'primereact/button';\nimport { Dialog } from 'primereact/dialog'; //import TablaS from '../componentsPrincipales/TablaL/TablaMerca'\n\nimport TablaL from '../componentsPrincipales/TablaL/Tabla.js';\nimport Fetch from '../componentsPrincipales/Fetch/FetchN.js';\nimport Formulario from './components/formulario';\n\nvar AdminPromociones = function AdminPromociones() {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      Data = _useState2[0],\n      setData = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      OpenForm = _useState4[0],\n      setOpenForm = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      DeleteForm = _useState6[0],\n      setDeleteForm = _useState6[1];\n\n  var _useState7 = useState({\n    idcat_promociones: false,\n    descripcion: '',\n    porcentaje: 0,\n    estatus: true\n  }),\n      _useState8 = _slicedToArray(_useState7, 2),\n      StateData = _useState8[0],\n      setStateData = _useState8[1];\n\n  var Columnas = [{\n    field: \"descripcion\",\n    header: \"Descripción\"\n  }, {\n    field: \"porcentaje\",\n    header: \"Porcentaje\"\n  }, {\n    field: \"status\",\n    header: \"Estatus\"\n  }];\n  useEffect(function () {\n    funget();\n  }, []);\n\n  var clearData = function clearData() {\n    setStateData({\n      idcat_promociones: false,\n      descripcion: '',\n      porcentaje: 0,\n      estatus: true\n    });\n  };\n\n  var validSaveUpdate = function validSaveUpdate() {\n    if (StateData.idcat_promociones) {\n      return true;\n    } else {\n      return false;\n    }\n  };\n\n  var funget = function funget() {\n    Fetch('api/promociones').then(function (response) {\n      setData(response.data);\n    }).catch(function (err) {\n      console.log(err);\n      Alert('warn', err);\n    });\n  };\n\n  var saveDataEdit = function saveDataEdit() {\n    if (validSaveUpdate()) {\n      funUpdate();\n      setOpenForm(false);\n      clearData();\n    } else {\n      funInsert();\n      setOpenForm(false);\n      clearData();\n    }\n  };\n\n  var funInsert = function funInsert() {\n    if (StateData.descripcion !== '' && StateData.porcentaje !== '') {\n      var formData = new FormData();\n      formData.append(\"descripcion\", StateData.descripcion);\n      formData.append(\"porcentaje\", StateData.porcentaje);\n      formData.append(\"estatus\", StateData.estatus);\n      Fetch(\"api/promociones\", {\n        method: \"POST\",\n        body: formData\n      }).then(function (response) {\n        if (response.status) {\n          funget();\n          Alert('success', 'Nueva Promoción Registrado');\n        } else {\n          Alert('warn', response.err);\n        }\n      }).catch(function (err) {\n        console.log(err);\n        Alert('warn', err);\n      });\n    }\n  };\n\n  var funUpdate = function funUpdate() {\n    if (StateData.idcat_promociones && StateData.descripcion !== '' && StateData.porcentaje !== 0) {\n      var formData = new FormData();\n      formData.append(\"idcat_promociones\", StateData.idcat_promociones);\n      formData.append(\"descripcion\", StateData.descripcion);\n      formData.append(\"porcentaje\", StateData.porcentaje);\n      formData.append(\"estatus\", StateData.estatus);\n      Fetch(\"api/promociones\", {\n        method: \"PUT\",\n        body: formData\n      }).then(function (response) {\n        if (response.status) {\n          funget();\n          Alert('success', 'Informacion Actualizada');\n        }\n      }).catch(function (err) {\n        console.log(err);\n        Alert('warn', err);\n      });\n    }\n  };\n\n  var funDeleted = function funDeleted() {\n    Fetch(\"api/promociones/\".concat(StateData.idcat_promociones), {\n      method: \"DELETE\"\n    }).then(function (response) {\n      if (response.status) {\n        funget();\n        Alert('success', 'Registro Eliminado!!!');\n      }\n    }).catch(function (err) {\n      console.log(err);\n      Alert('warn', err);\n    });\n  };\n\n  var DataEdit = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(rowData) {\n      var estatus;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              estatus = rowData.status == 1 ? true : false;\n              if (rowData.idcat_promociones) setStateData({\n                idcat_promociones: rowData.idcat_promociones,\n                descripcion: rowData.descripcion,\n                porcentaje: rowData.porcentaje,\n                estatus\n              });\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function DataEdit(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var DialogFooter = /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Button, {\n    label: \"Cancelar\",\n    icon: \"pi pi-times\",\n    className: \"p-button-text\",\n    onClick: function onClick() {\n      clearData();\n      setOpenForm(false);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    label: \"Guardar\",\n    icon: \"pi pi-check\",\n    className: \"p-button-text\",\n    onClick: function onClick() {\n      return saveDataEdit();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 7\n    }\n  }));\n  var deleteDialogFooter = /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Button, {\n    label: \"No\",\n    icon: \"pi pi-times\",\n    className: \"p-button-text\",\n    onClick: function onClick() {\n      setDeleteForm(false);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    label: \"Yes\",\n    icon: \"pi pi-check\",\n    className: \"p-button-text\",\n    onClick: function onClick() {\n      funDeleted();\n      funget();\n      setDeleteForm(false);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 7\n    }\n  }));\n  var leftContents = /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    label: \"Nuevo\",\n    icon: \"pi pi-plus\",\n    className: \"p-button-success p-mr-2\",\n    onClick: function onClick() {\n      clearData();\n      setOpenForm(true);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 7\n    }\n  }));\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Contenedor, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"datatable-crud-demo\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Toolbar, {\n    left: leftContents,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 11\n    }\n  }))), /*#__PURE__*/React.createElement(TablaL, {\n    Data: Data,\n    Columnas: Columnas,\n    OpenForm: OpenForm,\n    setOpenForm: setOpenForm,\n    DataEdit: DataEdit,\n    DeleteForm: DeleteForm,\n    setDeleteForm: setDeleteForm,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Dialog, {\n    visible: OpenForm,\n    style: {\n      width: '50%'\n    },\n    header: \"Promoci\\xF3n\",\n    modal: true,\n    className: \"p-fluid\",\n    footer: DialogFooter,\n    onHide: function onHide() {\n      setOpenForm(false);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 7\n    }\n  }, OpenForm ? /*#__PURE__*/React.createElement(Formulario, {\n    StateData: StateData,\n    setStateData: setStateData,\n    OpenForm: OpenForm,\n    setOpenForm: setOpenForm,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 11\n    }\n  }) : ''), /*#__PURE__*/React.createElement(Dialog, {\n    visible: DeleteForm,\n    style: {\n      width: '50%'\n    },\n    header: \"Confirm\",\n    modal: true,\n    footer: deleteDialogFooter,\n    onHide: function onHide() {\n      setDeleteForm(false);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"confirmation-content\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"pi pi-exclamation-triangle p-mr-3\",\n    style: {\n      fontSize: '2rem'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 11\n    }\n  }), DataEdit && /*#__PURE__*/React.createElement(\"span\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 22\n    }\n  }, \"Estas seguro de eliminar registro?\"))));\n};\n\nexport default AdminPromociones;","map":{"version":3,"sources":["/Users/leonardogutierrezjuarez/Documents/examen/src/moduloPromociones/index.js"],"names":["React","useState","useEffect","Contenedor","Alert","Toolbar","Button","Dialog","TablaL","Fetch","Formulario","AdminPromociones","Data","setData","OpenForm","setOpenForm","DeleteForm","setDeleteForm","idcat_promociones","descripcion","porcentaje","estatus","StateData","setStateData","Columnas","field","header","funget","clearData","validSaveUpdate","then","response","data","catch","err","console","log","saveDataEdit","funUpdate","funInsert","formData","FormData","append","method","body","status","funDeleted","DataEdit","rowData","DialogFooter","deleteDialogFooter","leftContents","width","fontSize"],"mappings":"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","sourcesContent":["import React,{useState,useEffect} from \"react\";\nimport Contenedor,{Alert} from '../componentsPrincipales/Alert.jsx'\nimport {Toolbar} from 'primereact/toolbar';\nimport {Button} from 'primereact/button';\nimport {Dialog} from 'primereact/dialog';\n//import TablaS from '../componentsPrincipales/TablaL/TablaMerca'\nimport TablaL from '../componentsPrincipales/TablaL/Tabla.js'\nimport Fetch from '../componentsPrincipales/Fetch/FetchN.js'\nimport Formulario from './components/formulario'\n\n\n\nconst AdminPromociones=() => {\n  const [Data,setData]=useState([])\n  const [OpenForm,setOpenForm]=useState(false)\n  const [DeleteForm,setDeleteForm]=useState(false)\n  const [StateData,setStateData]=useState(\n    {\n      idcat_promociones: false,\n      descripcion: '',\n      porcentaje: 0,\n      estatus: true,\n    }\n  )\n\n  const Columnas=[\n    {field: \"descripcion\",header: \"Descripción\"},\n    {field: \"porcentaje\",header: \"Porcentaje\"},\n    {field: \"status\",header: \"Estatus\"}\n  ]\n\n  useEffect(() => {\n    funget();\n  },[]);\n\n  const clearData=() => {\n    setStateData(\n      {\n        idcat_promociones: false,\n        descripcion: '',\n        porcentaje: 0,\n        estatus: true,\n      }\n    )\n  }\n\n  const validSaveUpdate=() => {\n    if(StateData.idcat_promociones) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  const funget=() => {\n    Fetch('api/promociones').then(response => {\n      setData(response.data)\n    }).catch(err => {\n      console.log(err);\n      Alert('warn',err);\n    });\n  }\n\n  const saveDataEdit=() => {\n    if(validSaveUpdate()) {\n      funUpdate();\n      setOpenForm(false);\n      clearData();\n    } else {\n      funInsert();\n      setOpenForm(false);\n      clearData();\n    }\n  }\n\n  const funInsert=() => {\n\n    if(\n      StateData.descripcion!==''&&\n      StateData.porcentaje!==''\n    ) {\n      let formData=new FormData();\n      formData.append(\"descripcion\",StateData.descripcion);\n      formData.append(\"porcentaje\",StateData.porcentaje);\n      formData.append(\"estatus\",StateData.estatus);\n      Fetch(`api/promociones`,{\n        method: \"POST\",\n        body: formData\n      }).then(response => {\n        if(response.status) {\n          funget()\n          Alert('success','Nueva Promoción Registrado');\n        } else {\n          Alert('warn',response.err);\n        }\n      }).catch(err => {\n        console.log(err);\n        Alert('warn',err);\n      });\n    }\n  }\n\n  const funUpdate=() => {\n    if(\n      StateData.idcat_promociones&&\n      StateData.descripcion!==''&&\n      StateData.porcentaje!==0\n    ) {\n      let formData=new FormData();\n      formData.append(\"idcat_promociones\",StateData.idcat_promociones)\n      formData.append(\"descripcion\",StateData.descripcion);\n      formData.append(\"porcentaje\",StateData.porcentaje);\n      formData.append(\"estatus\",StateData.estatus);\n      Fetch(`api/promociones`,{\n        method: \"PUT\",\n        body: formData\n      }).then(response => {\n        if(response.status) {\n          funget()\n          Alert('success','Informacion Actualizada');\n        }\n      }).catch(err => {\n        console.log(err);\n        Alert('warn',err);\n      });\n    }\n  }\n\n  const funDeleted=() => {\n    Fetch(`api/promociones/${StateData.idcat_promociones}`,{\n      method: \"DELETE\"\n    }).then(response => {\n      if(response.status) {\n        funget()\n        Alert('success','Registro Eliminado!!!');\n      }\n    }).catch(err => {\n      console.log(err);\n      Alert('warn',err);\n    });\n  }\n\n  const DataEdit=  async rowData =>{\n    \n    let estatus = rowData.status == 1? true : false\n\n    if(rowData.idcat_promociones)\n   \n      setStateData(\n        {\n          idcat_promociones: rowData.idcat_promociones,\n          descripcion: rowData.descripcion,\n          porcentaje: rowData.porcentaje,\n          estatus\n        }\n      )\n    \n\n  }\n\n  const DialogFooter=(\n    <>\n      <Button\n        label=\"Cancelar\"\n        icon=\"pi pi-times\"\n        className=\"p-button-text\"\n        onClick={() => {\n          clearData()\n          setOpenForm(false)\n        }\n        }\n      />\n      <Button\n        label=\"Guardar\"\n        icon=\"pi pi-check\"\n        className=\"p-button-text\"\n        onClick={() => saveDataEdit()}\n      />\n    </>\n  );\n\n  const deleteDialogFooter=(\n    <>\n      <Button\n        label=\"No\"\n        icon=\"pi pi-times\"\n        className=\"p-button-text\"\n        onClick={() => {setDeleteForm(false)}}\n      />\n      <Button\n        label=\"Yes\"\n        icon=\"pi pi-check\"\n        className=\"p-button-text\"\n        onClick={() => {\n          funDeleted()\n          funget()\n          setDeleteForm(false)\n        }}\n      />\n    </>\n  );\n\n  const leftContents=(\n    <React.Fragment>\n      <Button\n        label=\"Nuevo\"\n        icon=\"pi pi-plus\"\n        className=\"p-button-success p-mr-2\"\n        onClick={() => {\n          clearData()\n          setOpenForm(true)\n        }}\n      />\n    </React.Fragment>\n  )\n\n  return (\n    <React.Fragment>\n      <Contenedor />\n      <div className=\"datatable-crud-demo\">\n        <div className=\"card\">\n          <Toolbar left={leftContents} />\n        </div>\n      </div>\n\n      <TablaL\n        Data={Data}\n        Columnas={Columnas}\n        OpenForm={OpenForm}\n        setOpenForm={setOpenForm}\n        DataEdit={DataEdit}\n        DeleteForm={DeleteForm}\n        setDeleteForm={setDeleteForm}\n      />\n\n      <Dialog\n        visible={OpenForm}\n        style={{width: '50%'}}\n        header=\"Promoción\"\n        modal\n        className=\"p-fluid\"\n        footer={DialogFooter}\n        onHide={() => {setOpenForm(false)}}>\n        {/* <Panel header=\"Producto\"> */}\n        {/* Campo de clave */}\n        {/* <div className=\"p-grid\"> */}\n        {OpenForm? (\n          <Formulario\n            StateData={StateData}\n            setStateData={setStateData}\n            OpenForm={OpenForm} setOpenForm={setOpenForm}\n          />):''}\n        {/* </div> */}\n        {/* </Panel> */}\n      </Dialog>\n\n      <Dialog\n        visible={DeleteForm}\n        style={{width: '50%'}}\n        header=\"Confirm\"\n        modal\n        footer={deleteDialogFooter}\n        onHide={() => {setDeleteForm(false)}}>\n        <div className=\"confirmation-content\">\n          <i className=\"pi pi-exclamation-triangle p-mr-3\" style={{fontSize: '2rem'}} />\n          {DataEdit&&<span>Estas seguro de eliminar registro?</span>}\n        </div>\n      </Dialog>\n\n    </React.Fragment>\n  )\n\n}\n\n\nexport default AdminPromociones;"]},"metadata":{},"sourceType":"module"}