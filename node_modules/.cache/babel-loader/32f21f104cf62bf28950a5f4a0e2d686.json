{"ast":null,"code":"import Fetch from '../../componentsPrincipales/Fetch/FetchN.js';\nimport GetCookie from '../../componentsPrincipales/Fetch/GetCookie.js';\n/**\n * \n * @param {string} email\n * @param {string} Password \n */\n\nfunction LogicOfLogin() {\n  var email = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n  var password = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"\";\n  var setErr = arguments.length > 2 ? arguments[2] : undefined;\n  var basicAuth = btoa(\"\".concat(email, \":\").concat(password));\n  console.log(basicAuth);\n  Fetch('api/auth/sign-in', {\n    method: 'post',\n    auth: {\n      username: email,\n      password\n    }\n  }).then(function (response) {\n    if (response.token) {\n      if (GetCookie().length > 0) {\n        document.cookie = \"_userLog= ;expires = Thu, 01 Jan 1970 00:00:00 GMT\";\n      }\n\n      var expires = new Date();\n      expires.setTime(expires.getTime() + 86400000);\n      var cookie = \"_userLog=\".concat(response.token, \";expires=\").concat(expires.toUTCString(), \";path=/\");\n      document.cookie = cookie;\n      document.location.reload();\n    } else {\n      setErr(true);\n    }\n  }).catch(function (err) {\n    console.log(err);\n    setErr(true);\n  });\n}\n\nexport default LogicOfLogin;","map":{"version":3,"sources":["/Users/leonardogutierrezjuarez/Documents/examen/src/Login/logic/login.logic.js"],"names":["Fetch","GetCookie","LogicOfLogin","email","password","setErr","basicAuth","btoa","console","log","method","auth","username","then","response","token","length","document","cookie","expires","Date","setTime","getTime","toUTCString","location","reload","catch","err"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,6CAAlB;AACA,OAAOC,SAAP,MAAsB,gDAAtB;AACA;AACA;AACA;AACA;AACA;;AACA,SAASC,YAAT,GAAmD;AAAA,MAA7BC,KAA6B,uEAAvB,EAAuB;AAAA,MAApBC,QAAoB,uEAAX,EAAW;AAAA,MAARC,MAAQ;AACjD,MAAMC,SAAS,GAACC,IAAI,WAAIJ,KAAJ,cAAaC,QAAb,EAApB;AACAI,EAAAA,OAAO,CAACC,GAAR,CAAYH,SAAZ;AACAN,EAAAA,KAAK,CAAC,kBAAD,EAAoB;AAACU,IAAAA,MAAM,EAAE,MAAT;AAAgBC,IAAAA,IAAI,EAAE;AAACC,MAAAA,QAAQ,EAAET,KAAX;AAAiBC,MAAAA;AAAjB;AAAtB,GAApB,CAAL,CAA4ES,IAA5E,CAAiF,UAAAC,QAAQ,EAAI;AAC3F,QAAGA,QAAQ,CAACC,KAAZ,EAAmB;AACjB,UAAGd,SAAS,GAAGe,MAAZ,GAAmB,CAAtB,EAAyB;AACvBC,QAAAA,QAAQ,CAACC,MAAT,GAAgB,oDAAhB;AACD;;AACD,UAAIC,OAAO,GAAC,IAAIC,IAAJ,EAAZ;AACAD,MAAAA,OAAO,CAACE,OAAR,CAAgBF,OAAO,CAACG,OAAR,KAAkB,QAAlC;AACA,UAAIJ,MAAM,sBAAaJ,QAAQ,CAACC,KAAtB,sBACII,OAAO,CAACI,WAAR,EADJ,YAAV;AAEAN,MAAAA,QAAQ,CAACC,MAAT,GAAgBA,MAAhB;AACAD,MAAAA,QAAQ,CAACO,QAAT,CAAkBC,MAAlB;AACD,KAVD,MAUO;AACLpB,MAAAA,MAAM,CAAC,IAAD,CAAN;AACD;AACF,GAdD,EAcGqB,KAdH,CAcS,UAAAC,GAAG,EAAI;AACdnB,IAAAA,OAAO,CAACC,GAAR,CAAYkB,GAAZ;AACAtB,IAAAA,MAAM,CAAC,IAAD,CAAN;AACD,GAjBD;AAkBD;;AACD,eAAeH,YAAf","sourcesContent":["import Fetch from '../../componentsPrincipales/Fetch/FetchN.js';\nimport GetCookie from '../../componentsPrincipales/Fetch/GetCookie.js';\n/**\n * \n * @param {string} email\n * @param {string} Password \n */\nfunction LogicOfLogin(email=\"\",password=\"\",setErr) {\n  const basicAuth=btoa(`${email}:${password}`);\n  console.log(basicAuth)\n  Fetch('api/auth/sign-in',{method: 'post',auth: {username: email,password}}).then(response => {\n    if(response.token) {\n      if(GetCookie().length>0) {\n        document.cookie=\"_userLog= ;expires = Thu, 01 Jan 1970 00:00:00 GMT\"\n      }\n      let expires=new Date();\n      expires.setTime(expires.getTime()+86400000);\n      let cookie=`_userLog=${response.token\n        };expires=${expires.toUTCString()};path=/`;\n      document.cookie=cookie;\n      document.location.reload();\n    } else {\n      setErr(true);\n    }\n  }).catch(err => {\n    console.log(err);\n    setErr(true);\n  })\n}\nexport default LogicOfLogin;"]},"metadata":{},"sourceType":"module"}