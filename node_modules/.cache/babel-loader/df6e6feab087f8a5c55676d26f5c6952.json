{"ast":null,"code":"'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _classnames = require('classnames');\n\nvar _classnames2 = _interopRequireDefault(_classnames);\n\nvar _requestAnimationFrame = require('dom-helpers/util/requestAnimationFrame');\n\nvar _requestAnimationFrame2 = _interopRequireDefault(_requestAnimationFrame);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = require('react-dom');\n\nvar _dates = require('./utils/dates');\n\nvar _dates2 = _interopRequireDefault(_dates);\n\nvar _DayColumn = require('./DayColumn');\n\nvar _DayColumn2 = _interopRequireDefault(_DayColumn);\n\nvar _TimeGutter = require('./TimeGutter');\n\nvar _TimeGutter2 = _interopRequireDefault(_TimeGutter);\n\nvar _width = require('dom-helpers/query/width');\n\nvar _width2 = _interopRequireDefault(_width);\n\nvar _TimeGridHeader = require('./TimeGridHeader');\n\nvar _TimeGridHeader2 = _interopRequireDefault(_TimeGridHeader);\n\nvar _propTypes3 = require('./utils/propTypes');\n\nvar _helpers = require('./utils/helpers');\n\nvar _accessors = require('./utils/accessors');\n\nvar _eventLevels = require('./utils/eventLevels');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar TimeGrid = function (_Component) {\n  _inherits(TimeGrid, _Component);\n\n  function TimeGrid(props) {\n    _classCallCheck(this, TimeGrid);\n\n    var _this = _possibleConstructorReturn(this, _Component.call(this, props));\n\n    _this.handleResize = function () {\n      _requestAnimationFrame2.default.cancel(_this.rafHandle);\n\n      _this.rafHandle = (0, _requestAnimationFrame2.default)(_this.checkOverflow);\n    };\n\n    _this.gutterRef = function (ref) {\n      _this.gutter = ref && (0, _reactDom.findDOMNode)(ref);\n    };\n\n    _this.handleSelectAlldayEvent = function () {\n      for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      } //cancel any pending selections so only the event click goes through.\n\n\n      _this.clearSelection();\n\n      (0, _helpers.notify)(_this.props.onSelectEvent, args);\n    };\n\n    _this.handleSelectAllDaySlot = function (slots, slotInfo) {\n      var onSelectSlot = _this.props.onSelectSlot;\n      (0, _helpers.notify)(onSelectSlot, {\n        slots: slots,\n        start: slots[0],\n        end: slots[slots.length - 1],\n        action: slotInfo.action\n      });\n    };\n\n    _this.checkOverflow = function () {\n      if (_this._updatingOverflow) return;\n      var isOverflowing = _this.refs.content.scrollHeight > _this.refs.content.clientHeight;\n\n      if (_this.state.isOverflowing !== isOverflowing) {\n        _this._updatingOverflow = true;\n\n        _this.setState({\n          isOverflowing: isOverflowing\n        }, function () {\n          _this._updatingOverflow = false;\n        });\n      }\n    };\n\n    _this.state = {\n      gutterWidth: undefined,\n      isOverflowing: null\n    };\n    return _this;\n  }\n\n  TimeGrid.prototype.componentWillMount = function componentWillMount() {\n    this.calculateScroll();\n  };\n\n  TimeGrid.prototype.componentDidMount = function componentDidMount() {\n    this.checkOverflow();\n\n    if (this.props.width == null) {\n      this.measureGutter();\n    }\n\n    this.applyScroll();\n    this.positionTimeIndicator();\n    this.triggerTimeIndicatorUpdate();\n    window.addEventListener('resize', this.handleResize);\n  };\n\n  TimeGrid.prototype.componentWillUnmount = function componentWillUnmount() {\n    window.clearTimeout(this._timeIndicatorTimeout);\n    window.removeEventListener('resize', this.handleResize);\n\n    _requestAnimationFrame2.default.cancel(this.rafHandle);\n  };\n\n  TimeGrid.prototype.componentDidUpdate = function componentDidUpdate() {\n    if (this.props.width == null) {\n      this.measureGutter();\n    }\n\n    this.applyScroll();\n    this.positionTimeIndicator(); //this.checkOverflow()\n  };\n\n  TimeGrid.prototype.componentWillReceiveProps = function componentWillReceiveProps(nextProps) {\n    var _props = this.props,\n        range = _props.range,\n        scrollToTime = _props.scrollToTime; // When paginating, reset scroll\n\n    if (!_dates2.default.eq(nextProps.range[0], range[0], 'minute') || !_dates2.default.eq(nextProps.scrollToTime, scrollToTime, 'minute')) {\n      this.calculateScroll(nextProps);\n    }\n  };\n\n  TimeGrid.prototype.renderEvents = function renderEvents(range, events, today, resources) {\n    var _this2 = this;\n\n    var _props2 = this.props,\n        min = _props2.min,\n        max = _props2.max,\n        endAccessor = _props2.endAccessor,\n        startAccessor = _props2.startAccessor,\n        resourceAccessor = _props2.resourceAccessor,\n        resourceIdAccessor = _props2.resourceIdAccessor,\n        components = _props2.components;\n    return range.map(function (date, idx) {\n      var daysEvents = events.filter(function (event) {\n        return _dates2.default.inRange(date, (0, _accessors.accessor)(event, startAccessor), (0, _accessors.accessor)(event, endAccessor), 'day');\n      });\n      return resources.map(function (resource, id) {\n        var eventsToDisplay = !resource ? daysEvents : daysEvents.filter(function (event) {\n          return (0, _accessors.accessor)(event, resourceAccessor) === (0, _accessors.accessor)(resource, resourceIdAccessor);\n        });\n        return _react2.default.createElement(_DayColumn2.default, _extends({}, _this2.props, {\n          min: _dates2.default.merge(date, min),\n          max: _dates2.default.merge(date, max),\n          resource: (0, _accessors.accessor)(resource, resourceIdAccessor),\n          eventComponent: components.event,\n          eventWrapperComponent: components.eventWrapper,\n          timeSlotWrapperComponent: components.dayWrapper,\n          className: (0, _classnames2.default)({\n            'rbc-now': _dates2.default.eq(date, today, 'day')\n          }),\n          key: idx + '-' + id,\n          date: date,\n          events: eventsToDisplay\n        }));\n      });\n    });\n  };\n\n  TimeGrid.prototype.render = function render() {\n    var _this3 = this;\n\n    var _props3 = this.props,\n        events = _props3.events,\n        range = _props3.range,\n        width = _props3.width,\n        startAccessor = _props3.startAccessor,\n        endAccessor = _props3.endAccessor,\n        selected = _props3.selected,\n        getNow = _props3.getNow,\n        resources = _props3.resources,\n        components = _props3.components,\n        allDayAccessor = _props3.allDayAccessor,\n        eventPropGetter = _props3.eventPropGetter,\n        showMultiDayTimes = _props3.showMultiDayTimes,\n        longPressThreshold = _props3.longPressThreshold;\n    width = width || this.state.gutterWidth;\n    var start = range[0],\n        end = range[range.length - 1];\n    this.slots = range.length;\n    var allDayEvents = [],\n        rangeEvents = [];\n    events.forEach(function (event) {\n      if ((0, _eventLevels.inRange)(event, start, end, _this3.props)) {\n        var eStart = (0, _accessors.accessor)(event, startAccessor),\n            eEnd = (0, _accessors.accessor)(event, endAccessor);\n\n        if ((0, _accessors.accessor)(event, allDayAccessor) || _dates2.default.isJustDate(eStart) && _dates2.default.isJustDate(eEnd) || !showMultiDayTimes && !_dates2.default.eq(eStart, eEnd, 'day')) {\n          allDayEvents.push(event);\n        } else {\n          rangeEvents.push(event);\n        }\n      }\n    });\n    allDayEvents.sort(function (a, b) {\n      return (0, _eventLevels.sortEvents)(a, b, _this3.props);\n    });\n    return _react2.default.createElement('div', {\n      className: 'rbc-time-view'\n    }, _react2.default.createElement(_TimeGridHeader2.default, {\n      range: range,\n      events: allDayEvents,\n      width: width,\n      getNow: getNow,\n      dayFormat: this.props.dayFormat,\n      culture: this.props.culture,\n      resources: resources,\n      selected: selected,\n      selectable: this.props.selectable,\n      startAccessor: startAccessor,\n      endAccessor: endAccessor,\n      titleAccessor: this.props.titleAccessor,\n      tooltipAccessor: this.props.tooltipAccessor,\n      allDayAccessor: this.props.allDayAccessor,\n      resourceAccessor: this.props.resourceAccessor,\n      resourceIdAccessor: this.props.resourceIdAccessor,\n      resourceTitleAccessor: this.props.resourceTitleAccessor,\n      isOverflowing: this.state.isOverflowing,\n      dayPropGetter: this.props.dayPropGetter,\n      eventPropGetter: eventPropGetter,\n      longPressThreshold: longPressThreshold,\n      headerComponent: components.header,\n      eventComponent: components.event,\n      eventWrapperComponent: components.eventWrapper,\n      dateCellWrapperComponent: components.dateCellWrapper,\n      onSelectSlot: this.handleSelectAllDaySlot,\n      onSelectEvent: this.handleSelectAlldayEvent,\n      onDoubleClickEvent: this.props.onDoubleClickEvent,\n      onDrillDown: this.props.onDrillDown,\n      getDrilldownView: this.props.getDrilldownView\n    }), _react2.default.createElement('div', {\n      ref: 'content',\n      className: 'rbc-time-content'\n    }, _react2.default.createElement(_TimeGutter2.default, _extends({}, this.props, {\n      date: start,\n      ref: this.gutterRef,\n      className: 'rbc-time-gutter'\n    })), this.renderEvents(range, rangeEvents, getNow(), resources || [null]), _react2.default.createElement('div', {\n      ref: 'timeIndicator',\n      className: 'rbc-current-time-indicator'\n    })));\n  };\n\n  TimeGrid.prototype.clearSelection = function clearSelection() {\n    clearTimeout(this._selectTimer);\n    this._pendingSelection = [];\n  };\n\n  TimeGrid.prototype.measureGutter = function measureGutter() {\n    var width = (0, _width2.default)(this.gutter);\n\n    if (width && this.state.gutterWidth !== width) {\n      this.setState({\n        gutterWidth: width\n      });\n    }\n  };\n\n  TimeGrid.prototype.applyScroll = function applyScroll() {\n    if (this._scrollRatio) {\n      var content = this.refs.content;\n      content.scrollTop = content.scrollHeight * this._scrollRatio; // Only do this once\n\n      this._scrollRatio = null;\n    }\n  };\n\n  TimeGrid.prototype.calculateScroll = function calculateScroll() {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.props;\n    var min = props.min,\n        max = props.max,\n        scrollToTime = props.scrollToTime;\n\n    var diffMillis = scrollToTime - _dates2.default.startOf(scrollToTime, 'day');\n\n    var totalMillis = _dates2.default.diff(max, min);\n\n    this._scrollRatio = diffMillis / totalMillis;\n  };\n\n  TimeGrid.prototype.positionTimeIndicator = function positionTimeIndicator() {\n    var _props4 = this.props,\n        rtl = _props4.rtl,\n        min = _props4.min,\n        max = _props4.max,\n        getNow = _props4.getNow,\n        range = _props4.range;\n    var current = getNow();\n\n    var secondsGrid = _dates2.default.diff(max, min, 'seconds');\n\n    var secondsPassed = _dates2.default.diff(current, min, 'seconds');\n\n    var timeIndicator = this.refs.timeIndicator;\n    var factor = secondsPassed / secondsGrid;\n    var timeGutter = this.gutter;\n    var content = this.refs.content;\n\n    if (timeGutter && current >= min && current <= max) {\n      var pixelHeight = timeGutter.offsetHeight;\n      var dayPixelWidth = (content.offsetWidth - timeGutter.offsetWidth) / this.slots;\n      var dayOffset = range.findIndex(function (d) {\n        return _dates2.default.eq(d, _dates2.default.today(), 'day');\n      }) * dayPixelWidth;\n      var offset = Math.floor(factor * pixelHeight);\n      timeIndicator.style.display = dayOffset >= 0 ? 'block' : 'none';\n      timeIndicator.style[rtl ? 'left' : 'right'] = 0;\n      timeIndicator.style[rtl ? 'right' : 'left'] = timeGutter.offsetWidth + dayOffset + 'px';\n      timeIndicator.style.top = offset + 'px';\n      timeIndicator.style.width = dayPixelWidth + 'px';\n    } else {\n      timeIndicator.style.display = 'none';\n    }\n  };\n\n  TimeGrid.prototype.triggerTimeIndicatorUpdate = function triggerTimeIndicatorUpdate() {\n    var _this4 = this; // Update the position of the time indicator every minute\n\n\n    this._timeIndicatorTimeout = window.setTimeout(function () {\n      _this4.positionTimeIndicator();\n\n      _this4.triggerTimeIndicatorUpdate();\n    }, 60000);\n  };\n\n  return TimeGrid;\n}(_react.Component);\n\nTimeGrid.propTypes = {\n  events: _propTypes2.default.array.isRequired,\n  resources: _propTypes2.default.array,\n  step: _propTypes2.default.number,\n  range: _propTypes2.default.arrayOf(_propTypes2.default.instanceOf(Date)),\n  min: _propTypes2.default.instanceOf(Date),\n  max: _propTypes2.default.instanceOf(Date),\n  getNow: _propTypes2.default.func.isRequired,\n  scrollToTime: _propTypes2.default.instanceOf(Date),\n  eventPropGetter: _propTypes2.default.func,\n  dayPropGetter: _propTypes2.default.func,\n  dayFormat: _propTypes3.dateFormat,\n  showMultiDayTimes: _propTypes2.default.bool,\n  culture: _propTypes2.default.string,\n  rtl: _propTypes2.default.bool,\n  width: _propTypes2.default.number,\n  titleAccessor: _propTypes3.accessor.isRequired,\n  tooltipAccessor: _propTypes3.accessor.isRequired,\n  allDayAccessor: _propTypes3.accessor.isRequired,\n  startAccessor: _propTypes3.accessor.isRequired,\n  endAccessor: _propTypes3.accessor.isRequired,\n  resourceAccessor: _propTypes3.accessor.isRequired,\n  resourceIdAccessor: _propTypes3.accessor.isRequired,\n  resourceTitleAccessor: _propTypes3.accessor.isRequired,\n  selected: _propTypes2.default.object,\n  selectable: _propTypes2.default.oneOf([true, false, 'ignoreEvents']),\n  longPressThreshold: _propTypes2.default.number,\n  onNavigate: _propTypes2.default.func,\n  onSelectSlot: _propTypes2.default.func,\n  onSelectEnd: _propTypes2.default.func,\n  onSelectStart: _propTypes2.default.func,\n  onSelectEvent: _propTypes2.default.func,\n  onDoubleClickEvent: _propTypes2.default.func,\n  onDrillDown: _propTypes2.default.func,\n  getDrilldownView: _propTypes2.default.func.isRequired,\n  messages: _propTypes2.default.object,\n  components: _propTypes2.default.object.isRequired\n};\nTimeGrid.defaultProps = {\n  step: 30,\n  timeslots: 2,\n  min: _dates2.default.startOf(new Date(), 'day'),\n  max: _dates2.default.endOf(new Date(), 'day'),\n  scrollToTime: _dates2.default.startOf(new Date(), 'day')\n};\nexports.default = TimeGrid;\nmodule.exports = exports['default'];","map":{"version":3,"sources":["/Users/leonardogutierrezjuarez/Documents/GitHub/Front-Podologo/node_modules/react-big-calendar/lib/TimeGrid.js"],"names":["exports","__esModule","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_propTypes","require","_propTypes2","_interopRequireDefault","_classnames","_classnames2","_requestAnimationFrame","_requestAnimationFrame2","_react","_react2","_reactDom","_dates","_dates2","_DayColumn","_DayColumn2","_TimeGutter","_TimeGutter2","_width","_width2","_TimeGridHeader","_TimeGridHeader2","_propTypes3","_helpers","_accessors","_eventLevels","obj","default","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","TimeGrid","_Component","props","_this","handleResize","cancel","rafHandle","checkOverflow","gutterRef","ref","gutter","findDOMNode","handleSelectAlldayEvent","_len","args","Array","_key","clearSelection","notify","onSelectEvent","handleSelectAllDaySlot","slots","slotInfo","onSelectSlot","start","end","action","_updatingOverflow","isOverflowing","refs","content","scrollHeight","clientHeight","state","setState","gutterWidth","undefined","componentWillMount","calculateScroll","componentDidMount","width","measureGutter","applyScroll","positionTimeIndicator","triggerTimeIndicatorUpdate","window","addEventListener","componentWillUnmount","clearTimeout","_timeIndicatorTimeout","removeEventListener","componentDidUpdate","componentWillReceiveProps","nextProps","_props","range","scrollToTime","eq","renderEvents","events","today","resources","_this2","_props2","min","max","endAccessor","startAccessor","resourceAccessor","resourceIdAccessor","components","map","date","idx","daysEvents","filter","event","inRange","accessor","resource","id","eventsToDisplay","createElement","merge","eventComponent","eventWrapperComponent","eventWrapper","timeSlotWrapperComponent","dayWrapper","className","render","_this3","_props3","selected","getNow","allDayAccessor","eventPropGetter","showMultiDayTimes","longPressThreshold","allDayEvents","rangeEvents","forEach","eStart","eEnd","isJustDate","push","sort","a","b","sortEvents","dayFormat","culture","selectable","titleAccessor","tooltipAccessor","resourceTitleAccessor","dayPropGetter","headerComponent","header","dateCellWrapperComponent","dateCellWrapper","onDoubleClickEvent","onDrillDown","getDrilldownView","_selectTimer","_pendingSelection","_scrollRatio","scrollTop","diffMillis","startOf","totalMillis","diff","_props4","rtl","current","secondsGrid","secondsPassed","timeIndicator","factor","timeGutter","pixelHeight","offsetHeight","dayPixelWidth","offsetWidth","dayOffset","findIndex","d","offset","Math","floor","style","display","top","_this4","setTimeout","Component","propTypes","array","isRequired","step","number","arrayOf","instanceOf","Date","func","dateFormat","bool","string","object","oneOf","onNavigate","onSelectEnd","onSelectStart","messages","defaultProps","timeslots","endOf","module"],"mappings":"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","sourcesContent":["'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _classnames = require('classnames');\n\nvar _classnames2 = _interopRequireDefault(_classnames);\n\nvar _requestAnimationFrame = require('dom-helpers/util/requestAnimationFrame');\n\nvar _requestAnimationFrame2 = _interopRequireDefault(_requestAnimationFrame);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = require('react-dom');\n\nvar _dates = require('./utils/dates');\n\nvar _dates2 = _interopRequireDefault(_dates);\n\nvar _DayColumn = require('./DayColumn');\n\nvar _DayColumn2 = _interopRequireDefault(_DayColumn);\n\nvar _TimeGutter = require('./TimeGutter');\n\nvar _TimeGutter2 = _interopRequireDefault(_TimeGutter);\n\nvar _width = require('dom-helpers/query/width');\n\nvar _width2 = _interopRequireDefault(_width);\n\nvar _TimeGridHeader = require('./TimeGridHeader');\n\nvar _TimeGridHeader2 = _interopRequireDefault(_TimeGridHeader);\n\nvar _propTypes3 = require('./utils/propTypes');\n\nvar _helpers = require('./utils/helpers');\n\nvar _accessors = require('./utils/accessors');\n\nvar _eventLevels = require('./utils/eventLevels');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar TimeGrid = function (_Component) {\n  _inherits(TimeGrid, _Component);\n\n  function TimeGrid(props) {\n    _classCallCheck(this, TimeGrid);\n\n    var _this = _possibleConstructorReturn(this, _Component.call(this, props));\n\n    _this.handleResize = function () {\n      _requestAnimationFrame2.default.cancel(_this.rafHandle);\n      _this.rafHandle = (0, _requestAnimationFrame2.default)(_this.checkOverflow);\n    };\n\n    _this.gutterRef = function (ref) {\n      _this.gutter = ref && (0, _reactDom.findDOMNode)(ref);\n    };\n\n    _this.handleSelectAlldayEvent = function () {\n      for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      //cancel any pending selections so only the event click goes through.\n      _this.clearSelection();\n      (0, _helpers.notify)(_this.props.onSelectEvent, args);\n    };\n\n    _this.handleSelectAllDaySlot = function (slots, slotInfo) {\n      var onSelectSlot = _this.props.onSelectSlot;\n\n      (0, _helpers.notify)(onSelectSlot, {\n        slots: slots,\n        start: slots[0],\n        end: slots[slots.length - 1],\n        action: slotInfo.action\n      });\n    };\n\n    _this.checkOverflow = function () {\n      if (_this._updatingOverflow) return;\n\n      var isOverflowing = _this.refs.content.scrollHeight > _this.refs.content.clientHeight;\n\n      if (_this.state.isOverflowing !== isOverflowing) {\n        _this._updatingOverflow = true;\n        _this.setState({ isOverflowing: isOverflowing }, function () {\n          _this._updatingOverflow = false;\n        });\n      }\n    };\n\n    _this.state = { gutterWidth: undefined, isOverflowing: null };\n    return _this;\n  }\n\n  TimeGrid.prototype.componentWillMount = function componentWillMount() {\n    this.calculateScroll();\n  };\n\n  TimeGrid.prototype.componentDidMount = function componentDidMount() {\n    this.checkOverflow();\n\n    if (this.props.width == null) {\n      this.measureGutter();\n    }\n\n    this.applyScroll();\n\n    this.positionTimeIndicator();\n    this.triggerTimeIndicatorUpdate();\n\n    window.addEventListener('resize', this.handleResize);\n  };\n\n  TimeGrid.prototype.componentWillUnmount = function componentWillUnmount() {\n    window.clearTimeout(this._timeIndicatorTimeout);\n    window.removeEventListener('resize', this.handleResize);\n\n    _requestAnimationFrame2.default.cancel(this.rafHandle);\n  };\n\n  TimeGrid.prototype.componentDidUpdate = function componentDidUpdate() {\n    if (this.props.width == null) {\n      this.measureGutter();\n    }\n\n    this.applyScroll();\n    this.positionTimeIndicator();\n    //this.checkOverflow()\n  };\n\n  TimeGrid.prototype.componentWillReceiveProps = function componentWillReceiveProps(nextProps) {\n    var _props = this.props,\n        range = _props.range,\n        scrollToTime = _props.scrollToTime;\n    // When paginating, reset scroll\n\n    if (!_dates2.default.eq(nextProps.range[0], range[0], 'minute') || !_dates2.default.eq(nextProps.scrollToTime, scrollToTime, 'minute')) {\n      this.calculateScroll(nextProps);\n    }\n  };\n\n  TimeGrid.prototype.renderEvents = function renderEvents(range, events, today, resources) {\n    var _this2 = this;\n\n    var _props2 = this.props,\n        min = _props2.min,\n        max = _props2.max,\n        endAccessor = _props2.endAccessor,\n        startAccessor = _props2.startAccessor,\n        resourceAccessor = _props2.resourceAccessor,\n        resourceIdAccessor = _props2.resourceIdAccessor,\n        components = _props2.components;\n\n\n    return range.map(function (date, idx) {\n      var daysEvents = events.filter(function (event) {\n        return _dates2.default.inRange(date, (0, _accessors.accessor)(event, startAccessor), (0, _accessors.accessor)(event, endAccessor), 'day');\n      });\n\n      return resources.map(function (resource, id) {\n        var eventsToDisplay = !resource ? daysEvents : daysEvents.filter(function (event) {\n          return (0, _accessors.accessor)(event, resourceAccessor) === (0, _accessors.accessor)(resource, resourceIdAccessor);\n        });\n\n        return _react2.default.createElement(_DayColumn2.default, _extends({}, _this2.props, {\n          min: _dates2.default.merge(date, min),\n          max: _dates2.default.merge(date, max),\n          resource: (0, _accessors.accessor)(resource, resourceIdAccessor),\n          eventComponent: components.event,\n          eventWrapperComponent: components.eventWrapper,\n          timeSlotWrapperComponent: components.dayWrapper,\n          className: (0, _classnames2.default)({ 'rbc-now': _dates2.default.eq(date, today, 'day') }),\n          key: idx + '-' + id,\n          date: date,\n          events: eventsToDisplay\n        }));\n      });\n    });\n  };\n\n  TimeGrid.prototype.render = function render() {\n    var _this3 = this;\n\n    var _props3 = this.props,\n        events = _props3.events,\n        range = _props3.range,\n        width = _props3.width,\n        startAccessor = _props3.startAccessor,\n        endAccessor = _props3.endAccessor,\n        selected = _props3.selected,\n        getNow = _props3.getNow,\n        resources = _props3.resources,\n        components = _props3.components,\n        allDayAccessor = _props3.allDayAccessor,\n        eventPropGetter = _props3.eventPropGetter,\n        showMultiDayTimes = _props3.showMultiDayTimes,\n        longPressThreshold = _props3.longPressThreshold;\n\n\n    width = width || this.state.gutterWidth;\n\n    var start = range[0],\n        end = range[range.length - 1];\n\n    this.slots = range.length;\n\n    var allDayEvents = [],\n        rangeEvents = [];\n\n    events.forEach(function (event) {\n      if ((0, _eventLevels.inRange)(event, start, end, _this3.props)) {\n        var eStart = (0, _accessors.accessor)(event, startAccessor),\n            eEnd = (0, _accessors.accessor)(event, endAccessor);\n\n        if ((0, _accessors.accessor)(event, allDayAccessor) || _dates2.default.isJustDate(eStart) && _dates2.default.isJustDate(eEnd) || !showMultiDayTimes && !_dates2.default.eq(eStart, eEnd, 'day')) {\n          allDayEvents.push(event);\n        } else {\n          rangeEvents.push(event);\n        }\n      }\n    });\n\n    allDayEvents.sort(function (a, b) {\n      return (0, _eventLevels.sortEvents)(a, b, _this3.props);\n    });\n\n    return _react2.default.createElement(\n      'div',\n      { className: 'rbc-time-view' },\n      _react2.default.createElement(_TimeGridHeader2.default, {\n        range: range,\n        events: allDayEvents,\n        width: width,\n        getNow: getNow,\n        dayFormat: this.props.dayFormat,\n        culture: this.props.culture,\n        resources: resources,\n        selected: selected,\n        selectable: this.props.selectable,\n        startAccessor: startAccessor,\n        endAccessor: endAccessor,\n        titleAccessor: this.props.titleAccessor,\n        tooltipAccessor: this.props.tooltipAccessor,\n        allDayAccessor: this.props.allDayAccessor,\n        resourceAccessor: this.props.resourceAccessor,\n        resourceIdAccessor: this.props.resourceIdAccessor,\n        resourceTitleAccessor: this.props.resourceTitleAccessor,\n        isOverflowing: this.state.isOverflowing,\n        dayPropGetter: this.props.dayPropGetter,\n        eventPropGetter: eventPropGetter,\n        longPressThreshold: longPressThreshold,\n        headerComponent: components.header,\n        eventComponent: components.event,\n        eventWrapperComponent: components.eventWrapper,\n        dateCellWrapperComponent: components.dateCellWrapper,\n        onSelectSlot: this.handleSelectAllDaySlot,\n        onSelectEvent: this.handleSelectAlldayEvent,\n        onDoubleClickEvent: this.props.onDoubleClickEvent,\n        onDrillDown: this.props.onDrillDown,\n        getDrilldownView: this.props.getDrilldownView\n      }),\n      _react2.default.createElement(\n        'div',\n        { ref: 'content', className: 'rbc-time-content' },\n        _react2.default.createElement(_TimeGutter2.default, _extends({}, this.props, {\n          date: start,\n          ref: this.gutterRef,\n          className: 'rbc-time-gutter'\n        })),\n        this.renderEvents(range, rangeEvents, getNow(), resources || [null]),\n        _react2.default.createElement('div', { ref: 'timeIndicator', className: 'rbc-current-time-indicator' })\n      )\n    );\n  };\n\n  TimeGrid.prototype.clearSelection = function clearSelection() {\n    clearTimeout(this._selectTimer);\n    this._pendingSelection = [];\n  };\n\n  TimeGrid.prototype.measureGutter = function measureGutter() {\n    var width = (0, _width2.default)(this.gutter);\n\n    if (width && this.state.gutterWidth !== width) {\n      this.setState({ gutterWidth: width });\n    }\n  };\n\n  TimeGrid.prototype.applyScroll = function applyScroll() {\n    if (this._scrollRatio) {\n      var content = this.refs.content;\n\n      content.scrollTop = content.scrollHeight * this._scrollRatio;\n      // Only do this once\n      this._scrollRatio = null;\n    }\n  };\n\n  TimeGrid.prototype.calculateScroll = function calculateScroll() {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.props;\n    var min = props.min,\n        max = props.max,\n        scrollToTime = props.scrollToTime;\n\n\n    var diffMillis = scrollToTime - _dates2.default.startOf(scrollToTime, 'day');\n    var totalMillis = _dates2.default.diff(max, min);\n\n    this._scrollRatio = diffMillis / totalMillis;\n  };\n\n  TimeGrid.prototype.positionTimeIndicator = function positionTimeIndicator() {\n    var _props4 = this.props,\n        rtl = _props4.rtl,\n        min = _props4.min,\n        max = _props4.max,\n        getNow = _props4.getNow,\n        range = _props4.range;\n\n    var current = getNow();\n\n    var secondsGrid = _dates2.default.diff(max, min, 'seconds');\n    var secondsPassed = _dates2.default.diff(current, min, 'seconds');\n\n    var timeIndicator = this.refs.timeIndicator;\n    var factor = secondsPassed / secondsGrid;\n    var timeGutter = this.gutter;\n\n    var content = this.refs.content;\n\n    if (timeGutter && current >= min && current <= max) {\n      var pixelHeight = timeGutter.offsetHeight;\n      var dayPixelWidth = (content.offsetWidth - timeGutter.offsetWidth) / this.slots;\n      var dayOffset = range.findIndex(function (d) {\n        return _dates2.default.eq(d, _dates2.default.today(), 'day');\n      }) * dayPixelWidth;\n      var offset = Math.floor(factor * pixelHeight);\n\n      timeIndicator.style.display = dayOffset >= 0 ? 'block' : 'none';\n      timeIndicator.style[rtl ? 'left' : 'right'] = 0;\n      timeIndicator.style[rtl ? 'right' : 'left'] = timeGutter.offsetWidth + dayOffset + 'px';\n      timeIndicator.style.top = offset + 'px';\n      timeIndicator.style.width = dayPixelWidth + 'px';\n    } else {\n      timeIndicator.style.display = 'none';\n    }\n  };\n\n  TimeGrid.prototype.triggerTimeIndicatorUpdate = function triggerTimeIndicatorUpdate() {\n    var _this4 = this;\n\n    // Update the position of the time indicator every minute\n    this._timeIndicatorTimeout = window.setTimeout(function () {\n      _this4.positionTimeIndicator();\n\n      _this4.triggerTimeIndicatorUpdate();\n    }, 60000);\n  };\n\n  return TimeGrid;\n}(_react.Component);\n\nTimeGrid.propTypes = {\n  events: _propTypes2.default.array.isRequired,\n  resources: _propTypes2.default.array,\n\n  step: _propTypes2.default.number,\n  range: _propTypes2.default.arrayOf(_propTypes2.default.instanceOf(Date)),\n  min: _propTypes2.default.instanceOf(Date),\n  max: _propTypes2.default.instanceOf(Date),\n  getNow: _propTypes2.default.func.isRequired,\n\n  scrollToTime: _propTypes2.default.instanceOf(Date),\n  eventPropGetter: _propTypes2.default.func,\n  dayPropGetter: _propTypes2.default.func,\n  dayFormat: _propTypes3.dateFormat,\n  showMultiDayTimes: _propTypes2.default.bool,\n  culture: _propTypes2.default.string,\n\n  rtl: _propTypes2.default.bool,\n  width: _propTypes2.default.number,\n\n  titleAccessor: _propTypes3.accessor.isRequired,\n  tooltipAccessor: _propTypes3.accessor.isRequired,\n  allDayAccessor: _propTypes3.accessor.isRequired,\n  startAccessor: _propTypes3.accessor.isRequired,\n  endAccessor: _propTypes3.accessor.isRequired,\n  resourceAccessor: _propTypes3.accessor.isRequired,\n\n  resourceIdAccessor: _propTypes3.accessor.isRequired,\n  resourceTitleAccessor: _propTypes3.accessor.isRequired,\n\n  selected: _propTypes2.default.object,\n  selectable: _propTypes2.default.oneOf([true, false, 'ignoreEvents']),\n  longPressThreshold: _propTypes2.default.number,\n\n  onNavigate: _propTypes2.default.func,\n  onSelectSlot: _propTypes2.default.func,\n  onSelectEnd: _propTypes2.default.func,\n  onSelectStart: _propTypes2.default.func,\n  onSelectEvent: _propTypes2.default.func,\n  onDoubleClickEvent: _propTypes2.default.func,\n  onDrillDown: _propTypes2.default.func,\n  getDrilldownView: _propTypes2.default.func.isRequired,\n\n  messages: _propTypes2.default.object,\n  components: _propTypes2.default.object.isRequired\n};\nTimeGrid.defaultProps = {\n  step: 30,\n  timeslots: 2,\n  min: _dates2.default.startOf(new Date(), 'day'),\n  max: _dates2.default.endOf(new Date(), 'day'),\n  scrollToTime: _dates2.default.startOf(new Date(), 'day')\n};\nexports.default = TimeGrid;\nmodule.exports = exports['default'];"]},"metadata":{},"sourceType":"script"}