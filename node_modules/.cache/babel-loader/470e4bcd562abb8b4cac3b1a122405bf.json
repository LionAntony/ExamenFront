{"ast":null,"code":"import _slicedToArray from \"/Users/leonardogutierrezjuarez/Documents/examen/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/leonardogutierrezjuarez/Documents/examen/src/moduloAdminServicios/index.js\";\n\nimport React, { useState, useEffect } from \"react\";\nimport Contenedor, { Alert } from '../componentsPrincipales/Alert.jsx';\nimport { Toolbar } from 'primereact/toolbar';\nimport { Button } from 'primereact/button';\nimport { Dialog } from 'primereact/dialog';\nimport TablaS from '../componentsPrincipales/TablaL/TablaMerca';\nimport Fetch from '../componentsPrincipales/Fetch/FetchN.js';\nimport Formulario from './components/formulario';\n\nvar AdminServicios = function AdminServicios() {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      Data = _useState2[0],\n      setData = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      OpenForm = _useState4[0],\n      setOpenForm = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      DeleteForm = _useState6[0],\n      setDeleteForm = _useState6[1];\n\n  var _useState7 = useState({\n    idservicios: false,\n    nombre: '',\n    descripcion: '',\n    tipo: '',\n    precio: '',\n    precio_descuento: ''\n  }),\n      _useState8 = _slicedToArray(_useState7, 2),\n      StateData = _useState8[0],\n      setStateData = _useState8[1];\n\n  var Columnas = [{\n    field: \"nombre\",\n    header: \"Nombre\"\n  }, {\n    field: \"descripcion\",\n    header: \"Descripcion\"\n  }, {\n    field: \"precio\",\n    header: \"Precio\"\n  }, {\n    field: \"precio_descuento\",\n    header: \"Precio con descuento\"\n  }];\n  useEffect(function () {\n    funget();\n  }, []);\n\n  var clearData = function clearData() {\n    setStateData({\n      idservicios: false,\n      nombre: '',\n      descripcion: '',\n      tipo: '',\n      precio: '',\n      precio_descuento: ''\n    });\n  };\n\n  var validSaveUpdate = function validSaveUpdate() {\n    if (StateData.idservicios) {\n      return true;\n    } else {\n      return false;\n    }\n  };\n\n  var funget = function funget() {\n    Fetch('api/servicios').then(function (response) {\n      setData(response.data);\n    }).catch(function (err) {\n      console.log(err);\n      Alert('warn', err);\n    });\n  };\n\n  var saveDataEdit = function saveDataEdit() {\n    if (validSaveUpdate()) {\n      funUpdate();\n      setOpenForm(false);\n      clearData();\n    } else {\n      funInsert();\n      setOpenForm(false);\n      clearData();\n    }\n  };\n\n  var funInsert = function funInsert() {\n    if (StateData.nombre !== '' && StateData.descripcion !== '' && StateData.precio !== '' && StateData.precio_descuento !== '') {\n      var formData = new FormData();\n      formData.append(\"nombre\", StateData.nombre);\n      formData.append(\"descripcion\", StateData.descripcion);\n      formData.append(\"precio\", StateData.precio);\n      formData.append(\"precio_descuento\", StateData.precio_descuento);\n      Fetch(\"api/servicios\", {\n        method: \"POST\",\n        body: formData\n      }).then(function (response) {\n        if (response.status) {\n          funget();\n          Alert('success', 'Nuevo Servicio Registrado');\n        } else {\n          Alert('warn', response.err);\n        }\n      }).catch(function (err) {\n        console.log(err);\n        Alert('warn', err);\n      });\n    }\n  };\n\n  var funUpdate = function funUpdate() {\n    if (StateData.idservicios && StateData.nombre !== '' && StateData.descripcion !== '' && StateData.precio !== '' && StateData.precio_descuento !== '') {\n      var formData = new FormData();\n      formData.append(\"servicioID\", StateData.idservicios);\n      formData.append(\"nombre\", StateData.nombre);\n      formData.append(\"descripcion\", StateData.descripcion);\n      formData.append(\"precio\", StateData.precio);\n      formData.append(\"precio_descuento\", StateData.precio_descuento);\n      Fetch(\"api/servicios\", {\n        method: \"PUT\",\n        body: formData\n      }).then(function (response) {\n        if (response.status) {\n          funget();\n          Alert('success', 'Informacion Actualizada');\n        }\n      }).catch(function (err) {\n        console.log(err);\n        Alert('warn', err);\n      });\n    }\n  };\n\n  var funDeleted = function funDeleted() {\n    Fetch(\"api/servicios/\".concat(StateData.idservicios), {\n      method: \"DELETE\"\n    }).then(function (response) {\n      if (response.status) {\n        funget();\n        Alert('success', 'Registro Eliminado!!!');\n      }\n    }).catch(function (err) {\n      console.log(err);\n      Alert('warn', err);\n    });\n  };\n\n  var DataEdit = function DataEdit(rowData) {\n    if (rowData.idservicios) setStateData({\n      idservicios: rowData.idservicios,\n      nombre: rowData.nombre,\n      descripcion: rowData.descripcion,\n      tipo: rowData.tipo,\n      precio: rowData.precio,\n      precio_descuento: rowData.precio_descuento\n    });\n  };\n\n  var DialogFooter = /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Button, {\n    label: \"Cancelar\",\n    icon: \"pi pi-times\",\n    className: \"p-button-text\",\n    onClick: function onClick() {\n      clearData();\n      setOpenForm(false);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    label: \"Guardar\",\n    icon: \"pi pi-check\",\n    className: \"p-button-text\",\n    onClick: function onClick() {\n      return saveDataEdit();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 7\n    }\n  }));\n  var deleteDialogFooter = /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Button, {\n    label: \"No\",\n    icon: \"pi pi-times\",\n    className: \"p-button-text\",\n    onClick: function onClick() {\n      setDeleteForm(false);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    label: \"Yes\",\n    icon: \"pi pi-check\",\n    className: \"p-button-text\",\n    onClick: function onClick() {\n      funDeleted();\n      funget();\n      setDeleteForm(false);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 7\n    }\n  }));\n  var leftContents = /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    label: \"Nuevo\",\n    icon: \"pi pi-plus\",\n    className: \"p-button-success p-mr-2\",\n    onClick: function onClick() {\n      clearData();\n      setOpenForm(true);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 7\n    }\n  }));\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Contenedor, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"datatable-crud-demo\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Toolbar, {\n    left: leftContents,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 11\n    }\n  }))), /*#__PURE__*/React.createElement(TablaS, {\n    Data: Data,\n    Columnas: Columnas,\n    OpenForm: OpenForm,\n    setOpenForm: setOpenForm,\n    DataEdit: DataEdit,\n    DeleteForm: DeleteForm,\n    setDeleteForm: setDeleteForm,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Dialog, {\n    visible: OpenForm,\n    style: {\n      width: '50%'\n    },\n    header: \"Mercancia\",\n    modal: true,\n    className: \"p-fluid\",\n    footer: DialogFooter,\n    onHide: function onHide() {\n      setOpenForm(false);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 7\n    }\n  }, OpenForm ? /*#__PURE__*/React.createElement(Formulario, {\n    StateData: StateData,\n    setStateData: setStateData,\n    OpenForm: OpenForm,\n    setOpenForm: setOpenForm,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 11\n    }\n  }) : ''), /*#__PURE__*/React.createElement(Dialog, {\n    visible: DeleteForm,\n    style: {\n      width: '50%'\n    },\n    header: \"Confirm\",\n    modal: true,\n    footer: deleteDialogFooter,\n    onHide: function onHide() {\n      setDeleteForm(false);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"confirmation-content\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"pi pi-exclamation-triangle p-mr-3\",\n    style: {\n      fontSize: '2rem'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 11\n    }\n  }), DataEdit && /*#__PURE__*/React.createElement(\"span\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 22\n    }\n  }, \"Estas seguro de eliminar registro?\"))));\n};\n\nexport default AdminServicios;","map":{"version":3,"sources":["/Users/leonardogutierrezjuarez/Documents/examen/src/moduloAdminServicios/index.js"],"names":["React","useState","useEffect","Contenedor","Alert","Toolbar","Button","Dialog","TablaS","Fetch","Formulario","AdminServicios","Data","setData","OpenForm","setOpenForm","DeleteForm","setDeleteForm","idservicios","nombre","descripcion","tipo","precio","precio_descuento","StateData","setStateData","Columnas","field","header","funget","clearData","validSaveUpdate","then","response","data","catch","err","console","log","saveDataEdit","funUpdate","funInsert","formData","FormData","append","method","body","status","funDeleted","DataEdit","rowData","DialogFooter","deleteDialogFooter","leftContents","width","fontSize"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAcC,QAAd,EAAuBC,SAAvB,QAAuC,OAAvC;AACA,OAAOC,UAAP,IAAmBC,KAAnB,QAA+B,oCAA/B;AACA,SAAQC,OAAR,QAAsB,oBAAtB;AACA,SAAQC,MAAR,QAAqB,mBAArB;AACA,SAAQC,MAAR,QAAqB,mBAArB;AACA,OAAOC,MAAP,MAAmB,4CAAnB;AACA,OAAOC,KAAP,MAAkB,0CAAlB;AACA,OAAOC,UAAP,MAAuB,yBAAvB;;AAGA,IAAMC,cAAc,GAAC,SAAfA,cAAe,GAAM;AAAA,kBACJV,QAAQ,CAAC,EAAD,CADJ;AAAA;AAAA,MAClBW,IADkB;AAAA,MACbC,OADa;;AAAA,mBAEIZ,QAAQ,CAAC,KAAD,CAFZ;AAAA;AAAA,MAElBa,QAFkB;AAAA,MAETC,WAFS;;AAAA,mBAGQd,QAAQ,CAAC,KAAD,CAHhB;AAAA;AAAA,MAGlBe,UAHkB;AAAA,MAGPC,aAHO;;AAAA,mBAIMhB,QAAQ,CACrC;AACEiB,IAAAA,WAAW,EAAE,KADf;AAEEC,IAAAA,MAAM,EAAE,EAFV;AAGEC,IAAAA,WAAW,EAAE,EAHf;AAIEC,IAAAA,IAAI,EAAE,EAJR;AAKEC,IAAAA,MAAM,EAAE,EALV;AAMEC,IAAAA,gBAAgB,EAAE;AANpB,GADqC,CAJd;AAAA;AAAA,MAIlBC,SAJkB;AAAA,MAIRC,YAJQ;;AAezB,MAAMC,QAAQ,GAAC,CACb;AAACC,IAAAA,KAAK,EAAE,QAAR;AAAiBC,IAAAA,MAAM,EAAE;AAAzB,GADa,EAEb;AAACD,IAAAA,KAAK,EAAE,aAAR;AAAsBC,IAAAA,MAAM,EAAE;AAA9B,GAFa,EAGb;AAACD,IAAAA,KAAK,EAAE,QAAR;AAAiBC,IAAAA,MAAM,EAAE;AAAzB,GAHa,EAIb;AAACD,IAAAA,KAAK,EAAE,kBAAR;AAA2BC,IAAAA,MAAM,EAAE;AAAnC,GAJa,CAAf;AAOA1B,EAAAA,SAAS,CAAC,YAAM;AACd2B,IAAAA,MAAM;AACP,GAFQ,EAEP,EAFO,CAAT;;AAIA,MAAMC,SAAS,GAAC,SAAVA,SAAU,GAAM;AACpBL,IAAAA,YAAY,CACV;AACEP,MAAAA,WAAW,EAAE,KADf;AAEEC,MAAAA,MAAM,EAAE,EAFV;AAGEC,MAAAA,WAAW,EAAE,EAHf;AAIEC,MAAAA,IAAI,EAAE,EAJR;AAKEC,MAAAA,MAAM,EAAE,EALV;AAMEC,MAAAA,gBAAgB,EAAE;AANpB,KADU,CAAZ;AAUD,GAXD;;AAaA,MAAMQ,eAAe,GAAC,SAAhBA,eAAgB,GAAM;AAC1B,QAAGP,SAAS,CAACN,WAAb,EAA0B;AACxB,aAAO,IAAP;AACD,KAFD,MAEO;AACL,aAAO,KAAP;AACD;AACF,GAND;;AAQA,MAAMW,MAAM,GAAC,SAAPA,MAAO,GAAM;AACjBpB,IAAAA,KAAK,CAAC,eAAD,CAAL,CAAuBuB,IAAvB,CAA4B,UAAAC,QAAQ,EAAI;AACtCpB,MAAAA,OAAO,CAACoB,QAAQ,CAACC,IAAV,CAAP;AACD,KAFD,EAEGC,KAFH,CAES,UAAAC,GAAG,EAAI;AACdC,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACAhC,MAAAA,KAAK,CAAC,MAAD,EAAQgC,GAAR,CAAL;AACD,KALD;AAMD,GAPD;;AASA,MAAMG,YAAY,GAAC,SAAbA,YAAa,GAAM;AACvB,QAAGR,eAAe,EAAlB,EAAsB;AACpBS,MAAAA,SAAS;AACTzB,MAAAA,WAAW,CAAC,KAAD,CAAX;AACAe,MAAAA,SAAS;AACV,KAJD,MAIO;AACLW,MAAAA,SAAS;AACT1B,MAAAA,WAAW,CAAC,KAAD,CAAX;AACAe,MAAAA,SAAS;AACV;AACF,GAVD;;AAYA,MAAMW,SAAS,GAAC,SAAVA,SAAU,GAAM;AAEpB,QACEjB,SAAS,CAACL,MAAV,KAAmB,EAAnB,IACAK,SAAS,CAACJ,WAAV,KAAwB,EADxB,IAEAI,SAAS,CAACF,MAAV,KAAmB,EAFnB,IAGAE,SAAS,CAACD,gBAAV,KAA6B,EAJ/B,EAKE;AACA,UAAImB,QAAQ,GAAC,IAAIC,QAAJ,EAAb;AACAD,MAAAA,QAAQ,CAACE,MAAT,CAAgB,QAAhB,EAAyBpB,SAAS,CAACL,MAAnC;AACAuB,MAAAA,QAAQ,CAACE,MAAT,CAAgB,aAAhB,EAA8BpB,SAAS,CAACJ,WAAxC;AACAsB,MAAAA,QAAQ,CAACE,MAAT,CAAgB,QAAhB,EAAyBpB,SAAS,CAACF,MAAnC;AACAoB,MAAAA,QAAQ,CAACE,MAAT,CAAgB,kBAAhB,EAAmCpB,SAAS,CAACD,gBAA7C;AAEAd,MAAAA,KAAK,kBAAiB;AACpBoC,QAAAA,MAAM,EAAE,MADY;AAEpBC,QAAAA,IAAI,EAAEJ;AAFc,OAAjB,CAAL,CAGGV,IAHH,CAGQ,UAAAC,QAAQ,EAAI;AAClB,YAAGA,QAAQ,CAACc,MAAZ,EAAoB;AAClBlB,UAAAA,MAAM;AACNzB,UAAAA,KAAK,CAAC,SAAD,EAAW,2BAAX,CAAL;AACD,SAHD,MAGO;AACLA,UAAAA,KAAK,CAAC,MAAD,EAAQ6B,QAAQ,CAACG,GAAjB,CAAL;AACD;AACF,OAVD,EAUGD,KAVH,CAUS,UAAAC,GAAG,EAAI;AACdC,QAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACAhC,QAAAA,KAAK,CAAC,MAAD,EAAQgC,GAAR,CAAL;AACD,OAbD;AAcD;AACF,GA7BD;;AA+BA,MAAMI,SAAS,GAAC,SAAVA,SAAU,GAAM;AACpB,QACEhB,SAAS,CAACN,WAAV,IACAM,SAAS,CAACL,MAAV,KAAmB,EADnB,IAEAK,SAAS,CAACJ,WAAV,KAAwB,EAFxB,IAGAI,SAAS,CAACF,MAAV,KAAmB,EAHnB,IAIAE,SAAS,CAACD,gBAAV,KAA6B,EAL/B,EAME;AACA,UAAImB,QAAQ,GAAC,IAAIC,QAAJ,EAAb;AACAD,MAAAA,QAAQ,CAACE,MAAT,CAAgB,YAAhB,EAA6BpB,SAAS,CAACN,WAAvC;AACAwB,MAAAA,QAAQ,CAACE,MAAT,CAAgB,QAAhB,EAAyBpB,SAAS,CAACL,MAAnC;AACAuB,MAAAA,QAAQ,CAACE,MAAT,CAAgB,aAAhB,EAA8BpB,SAAS,CAACJ,WAAxC;AACAsB,MAAAA,QAAQ,CAACE,MAAT,CAAgB,QAAhB,EAAyBpB,SAAS,CAACF,MAAnC;AACAoB,MAAAA,QAAQ,CAACE,MAAT,CAAgB,kBAAhB,EAAmCpB,SAAS,CAACD,gBAA7C;AACAd,MAAAA,KAAK,kBAAiB;AACpBoC,QAAAA,MAAM,EAAE,KADY;AAEpBC,QAAAA,IAAI,EAAEJ;AAFc,OAAjB,CAAL,CAGGV,IAHH,CAGQ,UAAAC,QAAQ,EAAI;AAClB,YAAGA,QAAQ,CAACc,MAAZ,EAAoB;AAClBlB,UAAAA,MAAM;AACNzB,UAAAA,KAAK,CAAC,SAAD,EAAW,yBAAX,CAAL;AACD;AACF,OARD,EAQG+B,KARH,CAQS,UAAAC,GAAG,EAAI;AACdC,QAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACAhC,QAAAA,KAAK,CAAC,MAAD,EAAQgC,GAAR,CAAL;AACD,OAXD;AAYD;AACF,GA3BD;;AA6BA,MAAMY,UAAU,GAAC,SAAXA,UAAW,GAAM;AACrBvC,IAAAA,KAAK,yBAAkBe,SAAS,CAACN,WAA5B,GAA0C;AAC7C2B,MAAAA,MAAM,EAAE;AADqC,KAA1C,CAAL,CAEGb,IAFH,CAEQ,UAAAC,QAAQ,EAAI;AAClB,UAAGA,QAAQ,CAACc,MAAZ,EAAoB;AAClBlB,QAAAA,MAAM;AACNzB,QAAAA,KAAK,CAAC,SAAD,EAAW,uBAAX,CAAL;AACD;AACF,KAPD,EAOG+B,KAPH,CAOS,UAAAC,GAAG,EAAI;AACdC,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACAhC,MAAAA,KAAK,CAAC,MAAD,EAAQgC,GAAR,CAAL;AACD,KAVD;AAWD,GAZD;;AAcA,MAAMa,QAAQ,GAAC,SAATA,QAAS,CAAAC,OAAO,EAAI;AACxB,QAAGA,OAAO,CAAChC,WAAX,EACEO,YAAY,CACV;AACEP,MAAAA,WAAW,EAAEgC,OAAO,CAAChC,WADvB;AAEEC,MAAAA,MAAM,EAAE+B,OAAO,CAAC/B,MAFlB;AAGEC,MAAAA,WAAW,EAAE8B,OAAO,CAAC9B,WAHvB;AAIEC,MAAAA,IAAI,EAAE6B,OAAO,CAAC7B,IAJhB;AAKEC,MAAAA,MAAM,EAAE4B,OAAO,CAAC5B,MALlB;AAMEC,MAAAA,gBAAgB,EAAE2B,OAAO,CAAC3B;AAN5B,KADU,CAAZ;AAUH,GAZD;;AAcA,MAAM4B,YAAY,gBAChB,uDACE,oBAAC,MAAD;AACE,IAAA,KAAK,EAAC,UADR;AAEE,IAAA,IAAI,EAAC,aAFP;AAGE,IAAA,SAAS,EAAC,eAHZ;AAIE,IAAA,OAAO,EAAE,mBAAM;AACbrB,MAAAA,SAAS;AACTf,MAAAA,WAAW,CAAC,KAAD,CAAX;AACD,KAPH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAWE,oBAAC,MAAD;AACE,IAAA,KAAK,EAAC,SADR;AAEE,IAAA,IAAI,EAAC,aAFP;AAGE,IAAA,SAAS,EAAC,eAHZ;AAIE,IAAA,OAAO,EAAE;AAAA,aAAMwB,YAAY,EAAlB;AAAA,KAJX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAXF,CADF;AAqBA,MAAMa,kBAAkB,gBACtB,uDACE,oBAAC,MAAD;AACE,IAAA,KAAK,EAAC,IADR;AAEE,IAAA,IAAI,EAAC,aAFP;AAGE,IAAA,SAAS,EAAC,eAHZ;AAIE,IAAA,OAAO,EAAE,mBAAM;AAACnC,MAAAA,aAAa,CAAC,KAAD,CAAb;AAAqB,KAJvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAOE,oBAAC,MAAD;AACE,IAAA,KAAK,EAAC,KADR;AAEE,IAAA,IAAI,EAAC,aAFP;AAGE,IAAA,SAAS,EAAC,eAHZ;AAIE,IAAA,OAAO,EAAE,mBAAM;AACb+B,MAAAA,UAAU;AACVnB,MAAAA,MAAM;AACNZ,MAAAA,aAAa,CAAC,KAAD,CAAb;AACD,KARH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAPF,CADF;AAqBA,MAAMoC,YAAY,gBAChB,oBAAC,KAAD,CAAO,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,MAAD;AACE,IAAA,KAAK,EAAC,OADR;AAEE,IAAA,IAAI,EAAC,YAFP;AAGE,IAAA,SAAS,EAAC,yBAHZ;AAIE,IAAA,OAAO,EAAE,mBAAM;AACbvB,MAAAA,SAAS;AACTf,MAAAA,WAAW,CAAC,IAAD,CAAX;AACD,KAPH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF;AAcA,sBACE,oBAAC,KAAD,CAAO,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEE;AAAK,IAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,OAAD;AAAS,IAAA,IAAI,EAAEsC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,CAFF,eAQE,oBAAC,MAAD;AACE,IAAA,IAAI,EAAEzC,IADR;AAEE,IAAA,QAAQ,EAAEc,QAFZ;AAGE,IAAA,QAAQ,EAAEZ,QAHZ;AAIE,IAAA,WAAW,EAAEC,WAJf;AAKE,IAAA,QAAQ,EAAEkC,QALZ;AAME,IAAA,UAAU,EAAEjC,UANd;AAOE,IAAA,aAAa,EAAEC,aAPjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IARF,eAkBE,oBAAC,MAAD;AACE,IAAA,OAAO,EAAEH,QADX;AAEE,IAAA,KAAK,EAAE;AAACwC,MAAAA,KAAK,EAAE;AAAR,KAFT;AAGE,IAAA,MAAM,EAAC,WAHT;AAIE,IAAA,KAAK,MAJP;AAKE,IAAA,SAAS,EAAC,SALZ;AAME,IAAA,MAAM,EAAEH,YANV;AAOE,IAAA,MAAM,EAAE,kBAAM;AAACpC,MAAAA,WAAW,CAAC,KAAD,CAAX;AAAmB,KAPpC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAWGD,QAAQ,gBACP,oBAAC,UAAD;AACE,IAAA,SAAS,EAAEU,SADb;AAEE,IAAA,YAAY,EAAEC,YAFhB;AAGE,IAAA,QAAQ,EAAEX,QAHZ;AAGsB,IAAA,WAAW,EAAEC,WAHnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADO,GAKH,EAhBR,CAlBF,eAuCE,oBAAC,MAAD;AACE,IAAA,OAAO,EAAEC,UADX;AAEE,IAAA,KAAK,EAAE;AAACsC,MAAAA,KAAK,EAAE;AAAR,KAFT;AAGE,IAAA,MAAM,EAAC,SAHT;AAIE,IAAA,KAAK,MAJP;AAKE,IAAA,MAAM,EAAEF,kBALV;AAME,IAAA,MAAM,EAAE,kBAAM;AAACnC,MAAAA,aAAa,CAAC,KAAD,CAAb;AAAqB,KANtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAOE;AAAK,IAAA,SAAS,EAAC,sBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAG,IAAA,SAAS,EAAC,mCAAb;AAAiD,IAAA,KAAK,EAAE;AAACsC,MAAAA,QAAQ,EAAE;AAAX,KAAxD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAEGN,QAAQ,iBAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0CAFb,CAPF,CAvCF,CADF;AAwDD,CA5QD;;AAgRA,eAAetC,cAAf","sourcesContent":["import React,{useState,useEffect} from \"react\";\nimport Contenedor,{Alert} from '../componentsPrincipales/Alert.jsx'\nimport {Toolbar} from 'primereact/toolbar';\nimport {Button} from 'primereact/button';\nimport {Dialog} from 'primereact/dialog';\nimport TablaS from '../componentsPrincipales/TablaL/TablaMerca'\nimport Fetch from '../componentsPrincipales/Fetch/FetchN.js'\nimport Formulario from './components/formulario'\n\n\nconst AdminServicios=() => {\n  const [Data,setData]=useState([])\n  const [OpenForm,setOpenForm]=useState(false)\n  const [DeleteForm,setDeleteForm]=useState(false)\n  const [StateData,setStateData]=useState(\n    {\n      idservicios: false,\n      nombre: '',\n      descripcion: '',\n      tipo: '',\n      precio: '',\n      precio_descuento: ''\n    }\n  )\n\n  const Columnas=[\n    {field: \"nombre\",header: \"Nombre\"},\n    {field: \"descripcion\",header: \"Descripcion\"},\n    {field: \"precio\",header: \"Precio\"},\n    {field: \"precio_descuento\",header: \"Precio con descuento\"}\n  ]\n\n  useEffect(() => {\n    funget();\n  },[]);\n\n  const clearData=() => {\n    setStateData(\n      {\n        idservicios: false,\n        nombre: '',\n        descripcion: '',\n        tipo: '',\n        precio: '',\n        precio_descuento: ''\n      }\n    )\n  }\n\n  const validSaveUpdate=() => {\n    if(StateData.idservicios) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  const funget=() => {\n    Fetch('api/servicios').then(response => {\n      setData(response.data)\n    }).catch(err => {\n      console.log(err);\n      Alert('warn',err);\n    });\n  }\n\n  const saveDataEdit=() => {\n    if(validSaveUpdate()) {\n      funUpdate();\n      setOpenForm(false);\n      clearData();\n    } else {\n      funInsert();\n      setOpenForm(false);\n      clearData();\n    }\n  }\n\n  const funInsert=() => {\n\n    if(\n      StateData.nombre!==''&&\n      StateData.descripcion!==''&&\n      StateData.precio!==''&&\n      StateData.precio_descuento!==''\n    ) {\n      let formData=new FormData();\n      formData.append(\"nombre\",StateData.nombre);\n      formData.append(\"descripcion\",StateData.descripcion);\n      formData.append(\"precio\",StateData.precio);\n      formData.append(\"precio_descuento\",StateData.precio_descuento);\n\n      Fetch(`api/servicios`,{\n        method: \"POST\",\n        body: formData\n      }).then(response => {\n        if(response.status) {\n          funget()\n          Alert('success','Nuevo Servicio Registrado');\n        } else {\n          Alert('warn',response.err);\n        }\n      }).catch(err => {\n        console.log(err);\n        Alert('warn',err);\n      });\n    }\n  }\n\n  const funUpdate=() => {\n    if(\n      StateData.idservicios&&\n      StateData.nombre!==''&&\n      StateData.descripcion!==''&&\n      StateData.precio!==''&&\n      StateData.precio_descuento!==''\n    ) {\n      let formData=new FormData();\n      formData.append(\"servicioID\",StateData.idservicios)\n      formData.append(\"nombre\",StateData.nombre);\n      formData.append(\"descripcion\",StateData.descripcion);\n      formData.append(\"precio\",StateData.precio);\n      formData.append(\"precio_descuento\",StateData.precio_descuento);\n      Fetch(`api/servicios`,{\n        method: \"PUT\",\n        body: formData\n      }).then(response => {\n        if(response.status) {\n          funget()\n          Alert('success','Informacion Actualizada');\n        }\n      }).catch(err => {\n        console.log(err);\n        Alert('warn',err);\n      });\n    }\n  }\n\n  const funDeleted=() => {\n    Fetch(`api/servicios/${StateData.idservicios}`,{\n      method: \"DELETE\"\n    }).then(response => {\n      if(response.status) {\n        funget()\n        Alert('success','Registro Eliminado!!!');\n      }\n    }).catch(err => {\n      console.log(err);\n      Alert('warn',err);\n    });\n  }\n\n  const DataEdit=rowData => {\n    if(rowData.idservicios)\n      setStateData(\n        {\n          idservicios: rowData.idservicios,\n          nombre: rowData.nombre,\n          descripcion: rowData.descripcion,\n          tipo: rowData.tipo,\n          precio: rowData.precio,\n          precio_descuento: rowData.precio_descuento\n        }\n      )\n  }\n\n  const DialogFooter=(\n    <>\n      <Button\n        label=\"Cancelar\"\n        icon=\"pi pi-times\"\n        className=\"p-button-text\"\n        onClick={() => {\n          clearData()\n          setOpenForm(false)\n        }\n        }\n      />\n      <Button\n        label=\"Guardar\"\n        icon=\"pi pi-check\"\n        className=\"p-button-text\"\n        onClick={() => saveDataEdit()}\n      />\n    </>\n  );\n\n  const deleteDialogFooter=(\n    <>\n      <Button\n        label=\"No\"\n        icon=\"pi pi-times\"\n        className=\"p-button-text\"\n        onClick={() => {setDeleteForm(false)}}\n      />\n      <Button\n        label=\"Yes\"\n        icon=\"pi pi-check\"\n        className=\"p-button-text\"\n        onClick={() => {\n          funDeleted()\n          funget()\n          setDeleteForm(false)\n        }}\n      />\n    </>\n  );\n\n  const leftContents=(\n    <React.Fragment>\n      <Button\n        label=\"Nuevo\"\n        icon=\"pi pi-plus\"\n        className=\"p-button-success p-mr-2\"\n        onClick={() => {\n          clearData()\n          setOpenForm(true)\n        }}\n      />\n    </React.Fragment>\n  )\n\n  return (\n    <React.Fragment>\n      <Contenedor />\n      <div className=\"datatable-crud-demo\">\n        <div className=\"card\">\n          <Toolbar left={leftContents} />\n        </div>\n      </div>\n\n      <TablaS\n        Data={Data}\n        Columnas={Columnas}\n        OpenForm={OpenForm}\n        setOpenForm={setOpenForm}\n        DataEdit={DataEdit}\n        DeleteForm={DeleteForm}\n        setDeleteForm={setDeleteForm}\n      />\n\n      <Dialog\n        visible={OpenForm}\n        style={{width: '50%'}}\n        header=\"Mercancia\"\n        modal\n        className=\"p-fluid\"\n        footer={DialogFooter}\n        onHide={() => {setOpenForm(false)}}>\n        {/* <Panel header=\"Producto\"> */}\n        {/* Campo de clave */}\n        {/* <div className=\"p-grid\"> */}\n        {OpenForm? (\n          <Formulario\n            StateData={StateData}\n            setStateData={setStateData}\n            OpenForm={OpenForm} setOpenForm={setOpenForm}\n          />):''}\n        {/* </div> */}\n        {/* </Panel> */}\n      </Dialog>\n\n      <Dialog\n        visible={DeleteForm}\n        style={{width: '50%'}}\n        header=\"Confirm\"\n        modal\n        footer={deleteDialogFooter}\n        onHide={() => {setDeleteForm(false)}}>\n        <div className=\"confirmation-content\">\n          <i className=\"pi pi-exclamation-triangle p-mr-3\" style={{fontSize: '2rem'}} />\n          {DataEdit&&<span>Estas seguro de eliminar registro?</span>}\n        </div>\n      </Dialog>\n\n    </React.Fragment>\n  )\n\n}\n\n\n\nexport default AdminServicios;"]},"metadata":{},"sourceType":"module"}