{"ast":null,"code":"import _slicedToArray from \"/Users/leonardogutierrezjuarez/Documents/examen/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/leonardogutierrezjuarez/Documents/examen/src/moduloCobros/components/Factura.js\";\n\nimport React, { useState, useEffect } from 'react';\nimport { InputSwitch } from 'primereact/inputswitch';\nimport Fetch from '../../componentsPrincipales/Fetch/FetchN.js';\nimport Contenedor, { Alert } from '../../componentsPrincipales/Alert.jsx';\nimport { SelectButton } from 'primereact/selectbutton';\nimport { Button } from 'primereact/button';\n\nvar Factura = function Factura(_ref) {\n  var IdTicket = _ref.IdTicket,\n      getdata = _ref.getdata,\n      promociones = _ref.promociones;\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      Status = _useState2[0],\n      setStatus = _useState2[1];\n\n  var options = ['Si', 'No'];\n\n  var _useState3 = useState(),\n      _useState4 = _slicedToArray(_useState3, 2),\n      Promo = _useState4[0],\n      setPromo = _useState4[1];\n  /**\n   * Funcion que retorna si aplica o no promo y si se requiere o no factura\n   */\n\n\n  var getInfo = function getInfo() {\n    var datos = new FormData();\n    datos.append('id', IdTicket);\n    Fetch('api/pagos/promoFac', {\n      method: \"POST\",\n      body: datos\n    }).then(function (response) {\n      if (response.length) {\n        if (response[0].promo === 1) {\n          setPromo('Si');\n        }\n\n        if (response[0].promo === 0) {\n          setPromo('No');\n        }\n      } else {\n        setPromo('No');\n      }\n    });\n  };\n  /** \n   * Funcion que actualiza el aplicar o no la promo de adultos mayores\n  */\n\n\n  var onOffPromo = function onOffPromo() {\n    var datos = new FormData();\n    datos.append('idTicket', IdTicket);\n\n    if (Promo === 'Si') {\n      datos.append('promo', 1);\n    }\n\n    if (Promo === 'No') {\n      datos.append('promo', 0);\n    }\n\n    Fetch('api/pagos/promoAply', {\n      method: \"post\",\n      body: datos\n    }).then(function (response) {\n      getdata();\n    });\n  };\n\n  useEffect(function () {\n    getInfo();\n  }, []);\n  useEffect(function () {\n    if (Promo === 'Si' || Promo === 'No') {\n      onOffPromo();\n    }\n  }, [Promo]);\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Contenedor, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"p-mr-2 p-as-center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"p-col-12 p-lg-12\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card summary\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"title\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }\n  }, \"Requiere Factura\"), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"detail\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(InputSwitch, {\n    checked: Status === 0 ? false : true,\n    onChange: function onChange(e) {\n      return setStatus(e.value ? 1 : 0);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card summary\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"title\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }\n  }, \"Descueto adultos mayores o discapacidad\"), /*#__PURE__*/React.createElement(SelectButton, {\n    value: Promo,\n    options: options,\n    onChange: function onChange(e) {\n      return setPromo(e.value);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }\n  })), promociones.map(function (promocion, i) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card summary\",\n      key: i,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 21\n      }\n    }, \"Promocion de Temporada\"), /*#__PURE__*/React.createElement(Button, {\n      label: \"\".concat(promocion.descripcion, \" \").concat(promocion.porcentaje, \" % \"),\n      className: \"p-button-raised p-button-danger\",\n      disabled: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 21\n      }\n    })); //return <ObjectRow obj={object} key={i} />;\n  }))));\n};\n\nexport default Factura;","map":{"version":3,"sources":["/Users/leonardogutierrezjuarez/Documents/examen/src/moduloCobros/components/Factura.js"],"names":["React","useState","useEffect","InputSwitch","Fetch","Contenedor","Alert","SelectButton","Button","Factura","IdTicket","getdata","promociones","Status","setStatus","options","Promo","setPromo","getInfo","datos","FormData","append","method","body","then","response","length","promo","onOffPromo","e","value","map","promocion","i","descripcion","porcentaje"],"mappings":"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","sourcesContent":["import React,{useState,useEffect} from 'react';\nimport {InputSwitch} from 'primereact/inputswitch';\nimport Fetch from '../../componentsPrincipales/Fetch/FetchN.js'\nimport Contenedor,{Alert} from '../../componentsPrincipales/Alert.jsx'\nimport {SelectButton} from 'primereact/selectbutton';\nimport {Button} from 'primereact/button';\n\nconst Factura=({IdTicket,getdata, promociones}) => {\n\n  const [Status,setStatus]=useState()\n\n  const options=['Si','No'];\n  const [Promo,setPromo]=useState();\n\n  /**\n   * Funcion que retorna si aplica o no promo y si se requiere o no factura\n   */\n  const getInfo=() => {\n    let datos=new FormData()\n    datos.append('id',IdTicket)\n    Fetch('api/pagos/promoFac',{method: \"POST\",body: datos})\n      .then(response => {\n\n        if(response.length){\n           if(response[0].promo===1) {\n            setPromo('Si')\n          }\n          if(response[0].promo===0) {\n            setPromo('No')\n          }\n        }else{\n          setPromo('No');\n        }\n       \n      })\n  }\n\n  /** \n   * Funcion que actualiza el aplicar o no la promo de adultos mayores\n  */\n  const onOffPromo=() => {\n    let datos=new FormData()\n    datos.append('idTicket',IdTicket)\n    if(Promo==='Si') {\n      datos.append('promo',1)\n    }\n    if(Promo==='No') {\n      datos.append('promo',0)\n    }\n    Fetch('api/pagos/promoAply',{method: \"post\",body: datos})\n      .then(response => {\n        getdata()\n      })\n  }\n\n  useEffect(() => {\n    getInfo()\n  },[]);\n\n  useEffect(() => {\n    if(Promo==='Si'||Promo==='No') {\n      onOffPromo()\n    }\n\n  },[Promo]);\n\n  return (\n    <React.Fragment>\n      <Contenedor />\n      <div className=\"p-mr-2 p-as-center\">\n        <div className=\"p-col-12 p-lg-12\">\n          <div className=\"card summary\">\n            <span className=\"title\">Requiere Factura</span>\n            <span className=\"detail\"></span>\n            <InputSwitch checked={Status===0? false:true} onChange={(e) => setStatus(e.value? 1:0)} />\n          </div>\n          <div className=\"card summary\">\n            <span className=\"title\">Descueto adultos mayores o discapacidad</span>\n            <SelectButton value={Promo} options={options} onChange={(e) => setPromo(e.value)} />\n          </div>\n          {promociones.map(function(promocion, i){\n\n            return (<div className=\"card summary\" key={i} >\n                    <span>Promocion de Temporada</span>\n                    <Button label={ `${promocion.descripcion} ${promocion.porcentaje} % ` } className=\"p-button-raised p-button-danger\" disabled />\n                  </div>)\n              //return <ObjectRow obj={object} key={i} />;\n          })}\n          {/* <div className=\"card summary\">\n            <span>Promocion de Temporada</span>\n            <Button label=\"Buen Fin 50 %\" className=\"p-button-raised p-button-danger\" disabled />\n          </div> */}\n        </div>\n      </div>\n\n    </React.Fragment>\n  )\n}\n\nexport default Factura;"]},"metadata":{},"sourceType":"module"}